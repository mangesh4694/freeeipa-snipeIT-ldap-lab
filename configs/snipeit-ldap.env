# =============================================================================
# Snipe-IT LDAP Environment Configuration
# Project: FreeIPA + Snipe-IT LDAP Integration Lab
# =============================================================================
# INSTRUCTIONS:
#   1. Copy this file: cp snipeit-ldap.env .env
#   2. Fill in your actual values below
#   3. Never commit .env files with real passwords to Git!
# =============================================================================

# ─── Application ────────────────────────────────────
APP_ENV=production
APP_DEBUG=false

# Generate with: php artisan key:generate --show
# Or: echo "base64:$(openssl rand -base64 32)"
APP_KEY=base64:REPLACE_WITH_GENERATED_KEY

APP_URL=http://192.168.1.20:8080
APP_TIMEZONE=UTC
APP_LOCALE=en-US

# ─── Database ───────────────────────────────────────
DB_CONNECTION=mysql
DB_HOST=snipeit-db
DB_DATABASE=snipeit
DB_USERNAME=snipeit
DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD

MYSQL_ROOT_PASSWORD=REPLACE_WITH_ROOT_PASSWORD

# ─── Mail ───────────────────────────────────────────
# Use 'log' for testing, configure SMTP for production
MAIL_DRIVER=log
MAIL_HOST=localhost
MAIL_PORT=587
MAIL_FROM_ADDR=snipeit@theonetech.lab
MAIL_FROM_NAME=Snipe-IT Asset Management

# ─── LDAP (FreeIPA) ─────────────────────────────────
# These set defaults but should also be configured via the Snipe-IT web UI
# Admin > Settings > LDAP

# Enable LDAP
LDAP_ENABLED=true

# FreeIPA server hostname or IP
LDAP_SERVER=ipa.theonetech.lab

# LDAP port: 389 (plain) or 636 (TLS)
LDAP_PORT=389

# Use TLS/SSL? Set to 'true' if using port 636
LDAP_USE_SSL=false
LDAP_USE_TLS=false

# Base DN — top of your directory tree
LDAP_BASEDN=dc=theonetech,dc=lab

# Bind DN — the account used to search the directory
# FreeIPA format: uid=admin,cn=users,cn=accounts,dc=DOMAIN,dc=TLD
LDAP_BINDDN=uid=admin,cn=users,cn=accounts,dc=theonetech,dc=lab

# Bind password — use a dedicated service account in production!
LDAP_BINDPASS=REPLACE_WITH_ADMIN_PASSWORD

# ─── LDAP Attribute Mappings ────────────────────────
# These tell Snipe-IT which LDAP fields map to which Snipe-IT fields

# Username field in LDAP (FreeIPA uses 'uid')
LDAP_USERNAME_FIELD=uid

# First name field
LDAP_FNAME_FIELD=givenName

# Last name / Surname field
LDAP_LNAME_FIELD=sn

# Email field
LDAP_EMAIL=mail

# Employee number (optional)
# LDAP_EMP_NUM=employeeNumber

# ─── LDAP Filter ────────────────────────────────────
# Optional filter to limit which LDAP users can log in
# Leave blank to allow all users
# Example: only members of a specific group
# LDAP_AUTH_FILTER_QUERY=(memberOf=cn=snipeit-users,cn=groups,cn=accounts,dc=theonetech,dc=lab)

# ─── LDAP Advanced ──────────────────────────────────
# AD-specific settings (not needed for FreeIPA)
AD_APPEND_DOMAIN=false
